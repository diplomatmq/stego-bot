"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏ Telethon.
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –û–î–ò–ù –†–ê–ó –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª giveaway_session.session –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω
–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
"""
import asyncio
import logging
import os
from telethon import TelegramClient

# –ü—ã—Ç–∞–µ–º—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ config, –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è - —á–∏—Ç–∞–µ–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
try:
    from config import TELEGRAM_API_ID, TELEGRAM_API_HASH
except ImportError:
    from dotenv import load_dotenv
    load_dotenv()
    TELEGRAM_API_ID = os.getenv("TELEGRAM_API_ID")
    TELEGRAM_API_HASH = os.getenv("TELEGRAM_API_HASH")

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)


async def setup_session():
    """
    –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Å–µ—Å—Å–∏—é Telethon.
    –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
    """
    if not TELEGRAM_API_ID or not TELEGRAM_API_HASH:
        print("‚ùå –û–®–ò–ë–ö–ê: TELEGRAM_API_ID –∏ TELEGRAM_API_HASH –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ .env —Ñ–∞–π–ª–µ")
        print("üìã –ü–æ–ª—É—á–∏—Ç–µ –∏—Ö –Ω–∞ https://my.telegram.org/apps")
        return
    
    print("üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏ Telethon...")
    print("üìù –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –õ–ò–ß–ù–´–ô –∞–∫–∫–∞—É–Ω—Ç Telegram (–Ω–µ –±–æ—Ç–∞!)")
    print("üìù –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ –∂–µ API credentials (API ID –∏ API Hash), —á—Ç–æ –∏ –¥–ª—è –±–æ—Ç–∞")
    print()
    print("‚ö†Ô∏è  –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:")
    print("   –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –î–û–õ–ñ–ï–ù —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –ø–æ–ª—É—á–∏–ª–∏")
    print("   API credentials –Ω–∞ https://my.telegram.org/apps")
    print("   –ù–ï–õ–¨–ó–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –Ω–æ–º–µ—Ä - —ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!")
    print()
    print("üì± –§–û–†–ú–ê–¢ –ù–û–ú–ï–†–ê –¢–ï–õ–ï–§–û–ù–ê:")
    print("   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å + (–ø–ª—é—Å–æ–º)")
    print("   –≠—Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¢–û–¢ –ñ–ï –Ω–æ–º–µ—Ä, —á—Ç–æ –∏ –Ω–∞ my.telegram.org/apps")
    print("   –ü—Ä–∏–º–µ—Ä—ã:")
    print("   - –†–æ—Å—Å–∏—è: +79991234567")
    print("   - –£–∫—Ä–∞–∏–Ω–∞: +380991234567")
    print("   - –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω: +77001234567")
    print("   - –°–®–ê: +1234567890")
    print("   - –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –¥–µ—Ñ–∏—Å–æ–≤!")
    print()
    print("üîê –ï–°–õ–ò –£ –í–ê–° –í–ö–õ–Æ–ß–ï–ù 2FA:")
    print("   –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Telethon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç")
    print("   –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (2FA)")
    print("   –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å 2FA, –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å—è—Ç")
    print()
    
    # –ò–º—è —Å–µ—Å—Å–∏–∏ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ giveaway.py
    client = TelegramClient('giveaway_session', int(TELEGRAM_API_ID), TELEGRAM_API_HASH)
    
    try:
        print("üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram...")
        print("üì± –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–¢–û–¢ –ñ–ï, —á—Ç–æ –Ω–∞ my.telegram.org/apps)")
        print("üì± –ó–∞—Ç–µ–º –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ Telegram")
        print("üîê –ï—Å–ª–∏ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω 2FA, –ø–æ—Å–ª–µ –∫–æ–¥–∞ –ø–æ–ø—Ä–æ—Å—è—Ç –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å 2FA")
        print()
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–ª–∏–µ–Ω—Ç (–º–æ–∂–µ—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–º–µ—Ä –∏ –∫–æ–¥)
        await client.start()
        
        print()
        print("‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏...")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞ –Ω–µ –±–æ—Ç
        me = await client.get_me()
        
        if me.bot:
            print("‚ùå –û–®–ò–ë–ö–ê: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –±–æ—Ç!")
            print("üìù –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –õ–ò–ß–ù–´–ô –∞–∫–∫–∞—É–Ω—Ç Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –Ω–µ –±–æ—Ç–∞")
            print("üìù –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –õ–ò–ß–ù–û–ì–û –∞–∫–∫–∞—É–Ω—Ç–∞")
            return
        
        print()
        print("=" * 60)
        print(f"‚úÖ –£–°–ü–ï–®–ù–ê–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø!")
        print("=" * 60)
        print()
        print(f"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {me.first_name} {me.last_name or ''}")
        if me.username:
            print(f"üì± Username: @{me.username}")
        print(f"üÜî ID: {me.id}")
        print()
        print("üíæ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª: giveaway_session.session")
        print("‚úÖ –¢–µ–ø–µ—Ä—å –±–æ—Ç –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏!")
        print()
        print("=" * 60)
        print("üìã –ß–¢–û –î–ê–õ–¨–®–ï:")
        print("=" * 60)
        print("  1. ‚úÖ –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å (—Å–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞)")
        print("  2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –æ–±—ã—á–Ω–æ - –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Å–µ—Å—Å–∏—é")
        print("  3. ‚úÖ –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –∏—Å—Ç–µ—á–µ—Ç, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞")
        print()
        print("üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:")
        print("  - –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞ –ù–ï —É–≤–∏–¥—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ")
        print("  - Telethon —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Å–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
        print("  - –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Å—Å–∏—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç")
        print()
        
    except KeyboardInterrupt:
        print()
        print("‚ö†Ô∏è –ü—Ä–µ—Ä–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
        print("üí° –°–µ—Å—Å–∏—è –Ω–µ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏.")
    except Exception as e:
        print()
        print("=" * 60)
        print(f"‚ùå –û–®–ò–ë–ö–ê –ü–†–ò –°–û–ó–î–ê–ù–ò–ò –°–ï–°–°–ò–ò")
        print("=" * 60)
        print(f"–û—à–∏–±–∫–∞: {e}")
        print()
        print("üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:")
        print("  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è")
        print("  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ TELEGRAM_API_ID –∏–ª–∏ TELEGRAM_API_HASH")
        print("  - –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É")
        print("  - –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ (–Ω—É–∂–Ω–æ —Å + –≤ –Ω–∞—á–∞–ª–µ)")
        print()
        print("üìã –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:")
        print("  1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞: +79991234567 (—Å + –≤ –Ω–∞—á–∞–ª–µ)")
        print("  2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π")
        print("  3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ")
        print("  4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç")
    finally:
        if client.is_connected():
            await client.disconnect()
            print("üîå –û—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç Telegram")


if __name__ == "__main__":
    print("=" * 60)
    print("üîê –ù–ê–°–¢–†–û–ô–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–û–ô –°–ï–°–°–ò–ò TELETHON")
    print("=" * 60)
    print()
    
    asyncio.run(setup_session())

